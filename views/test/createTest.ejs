
    <%- include('../layout/header.ejs') %>

<div class="p-4">
    <h1>Create Test</h1>

    <form class="row g-3" action="/api/v1/test/create" method="post" enctype="multipart/form-data">
        <div class="col-md-6">
            <label for="name" class="form-label">Test Name</label>
            <input type="text" name="name" class="form-control" id="name" required>
        </div>

        <div class="col-md-4">
            <label for="category" class="form-label">Category</label>
            <select id="category" name="category" class="form-select" required>
                <option selected>Choose...</option>
                <option value="Soil">Soil Test</option>
                <option value="Aggregate">Aggregate Test</option>
                <option value="Concrete">Concrete Test</option>
                <option value="Asphalt">Asphalt Test</option>
                <option value="Cement">Cement Test</option>
            </select>
        </div>

        <div class="col-md-6">
            <label for="introduction" class="form-label">Test Introduction</label>
            <textarea rows="14" type="text" name="introduction" class="form-control" id="introduction" required></textarea>
        </div>

        <div class="col-md-6">
            <label for="equipments" class="form-label">Test Equipments</label>
            <div id="equipments-container">
                <input type="text" name="equipments[]" class="form-control" required> <br> 
            </div>
        </div>

        <div class="col-md-6">
            <label for="sampling" class="form-label">Test Sampling Procedure</label>
            <div id="sampling-container">
                <input type="text" name="sampling[]" class="form-control" required> <br>
            </div>
        </div>

        <div class="col-md-6">
            <label for="procedure" class="form-label">Test Procedure</label>
            <div id="procedure-container">
                <input type="text" name="procedure[]" class="form-control" required> <br>
            </div>
        </div>

        <div>
            <label for="image" class="form-label">Upload Image:</label>
            <input type="file" class="form-control" required name="image">
        </div>

        <div class="col-md-6">
            <label for="formula" class="form-label">Formula for calculation</label>
            <textarea rows="14" type="text" name="formula" class="form-control" id="formula" required></textarea>
        </div>

        <div class="col-md-6">
            <label for="result" class="form-label">Results</label>
            <textarea rows="14" type="text" class="form-control" name="result" id="result" required></textarea>
        </div>

        <div class="col-12">
            <button type="submit" class="btn btn-primary btn-lg">Create Test</button>
        </div>
    </form>
</div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
    setupAddButton('equipments');
    setupAddButton('sampling');
    setupAddButton('procedure');
  });
  
  function setupAddButton(fieldName) {
    const container = document.getElementById(`${fieldName}-container`);
    const addButton = document.createElement('button');
    addButton.textContent = `Add ${fieldName}`;
    addButton.classList.add('btn', 'btn-secondary', 'mt-2');
    container.appendChild(addButton);
  
    addButton.addEventListener('click', () => {
      addNewInputField(container, fieldName);
    });
  }
  
  function addNewInputField(container, fieldName) {
    const newInput = document.createElement('input');
    newInput.type = 'text';
    newInput.name = `${fieldName}[]`;
    newInput.classList.add('form-control', 'mb-2');
    newInput.required = true;
  
    const removeButton = document.createElement('button');
    removeButton.textContent = 'Remove';
    removeButton.classList.add('btn', 'btn-danger', 'btn-sm', 'ms-2');
    removeButton.addEventListener('click', () => {
      container.removeChild(newInput);
      container.removeChild(removeButton);
    });
  
    container.appendChild(newInput);
    container.appendChild(removeButton);
  }
  
    </script>

    <%- include('../layout/footer.ejs') %>